<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <title>My test page</title>
  </head>
  <body>
    <p>This is my page</p>
  </body>
  <script>
    function fetchAndDecode(url, type) {
      return fetch(url)
        .then((response) => {
          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          } else {
            if (type === "blob") {
              return response.blob();
            } else if (type === "text") {
              return response.text();
            }
          }
        })
        .catch((e) =>
          console.log(
            `There has been a problem with your fetch operation for resource "${url}": ` +
              e.message
          )
        );
    }
    let coffeePromise = fetchAndDecode("coffee.jpg", "blob");
    let teaPromise = fetchAndDecode("tea.jpg", "blob");
    let txtPromise = fetchAndDecode("description.txt", "text");

    Promise.all([coffeePromise, teaPromise, txtPromise]).then((values) => {
      console.log("%c values: ", "color: magenta", values);
      let coffee = URL.createObjectURL(values[0]);
      let tea = URL.createObjectURL(values[1]);
      let text = values[2];

      let image1 = document.createElement("img");
      let image2 = document.createElement("img");
      image1.src = coffee;
      image2.src = tea;
      document.body.appendChild(image1);
      document.body.appendChild(image2);

      let para = document.createElement("p");
      para.textContent = text;
      document.body.appendChild(para);
    });
  </script>
</html>
